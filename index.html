<!doctype html>
<html>
<head>
    <title>INDRA Interactive Map</title>
    <!-- CSS -->
    <link href="static/style.css" rel="stylesheet" type="text/css" />

    <!-- bower:css -->
    <link rel="stylesheet" href="static/bower_components/qtip2/jquery.qtip.min.css" />
    <link rel="stylesheet" href="static/bower_components/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="static/bower_components/bootstrap-select/dist/css/bootstrap-select.css" />
    <link rel="stylesheet" href="static/bower_components/cytoscape-panzoom/cytoscape.js-panzoom.css" />
    <link rel="stylesheet" href="static/bower_components/components-font-awesome/css/font-awesome.css" />
    <link rel="stylesheet" href="static/bower_components/seiyria-bootstrap-slider/dist/css/bootstrap-slider.css" />
    <!-- endbower -->
    <!-- bower:js -->
    <script src="static/bower_components/jquery/dist/jquery.js"></script>
    <script src="static/bower_components/cytoscape/dist/cytoscape.js"></script>
    <script src="static/bower_components/lodash/lodash.js"></script>
    <script src="static/bower_components/graphlib/dist/graphlib.core.js"></script>
    <script src="static/bower_components/dagre/dist/dagre.core.js"></script>
    <script src="static/bower_components/dagre/dist/dagre.core.min.js"></script>
    <script src="static/bower_components/cytoscape-dagre/cytoscape-dagre.js"></script>
    <script src="static/bower_components/webcola/WebCola/cola.min.js"></script>
    <script src="static/bower_components/cytoscape-cola/cytoscape-cola.js"></script>
    <script src="static/bower_components/ev-emitter/ev-emitter.js"></script>
    <script src="static/bower_components/imagesloaded/imagesloaded.js"></script>
    <script src="static/bower_components/qtip2/jquery.qtip.min.js"></script>
    <script src="static/bower_components/cytoscape-qtip/cytoscape-qtip.js"></script>
    <script src="static/bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="static/bower_components/bootstrap-select/dist/js/bootstrap-select.js"></script>
    <script src="static/bower_components/cytoscape-panzoom/cytoscape-panzoom.js"></script>
    <script src="static/bower_components/seiyria-bootstrap-slider/dist/bootstrap-slider.js"></script>
    <script src="static/bower_components/papaparse/papaparse.js"></script>
    <!-- endbower -->

    <!-- js -->
    <script src="static/colorbrewer/colorbrewer.js"></script>
    <script src="static/js/drawCytoscape.js"></script>
    <script src="static/js/contextualizeNodes.js"></script>
    <script src="static/js/qtipNodes.js"></script>
    <script src="static/js/highlightPath.js"></script>
    <script src="static/js/requests_APIs.js"></script>
    <script src="static/js/loopyFromCyJS.js"></script>
    <script src="static/js/base_script.js"></script>
    <!-- js -->



    <!-- google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-96082280-1', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- end google analytics -->

</head>

<body>
    <!-- container-fluid : start -->
    <div class="container-fluid">

    <div class=row>
        <div class="col-md-4">
            <h1><img src="indra_logo_v2.png" alt="INDRA logo" style="height:30px;"></img> INDRA </h1>
            <h5>Integrated Network and Dynamical Reasoning Assembler </h5>
        </div>
    </div>

    <div class=row>
      <div class='col-md-12'>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-default btn-lg" data-toggle="modal" data-target="#menu">
            <span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
        </button>



        <!-- Modal -->
        <div class="modal" id="menu" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-body">
                  <div class="tabbable">
                  <ul class="nav nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#ras227">McCormick Map</a></li>
                    <li ><a data-toggle="tab" href="#byom">BYOM</a></li>
                    <li ><a data-toggle="tab" href="#context">Context</a></li>
                    <li ><a data-toggle="tab" href="#about">About</a></li>
                  </ul>

                <div class="tab-content">
                  <div id="ras227" class="tab-pane fade in active">
                    <div>.</div>
                    <button id='loadButtonStatic' type="submit" class="btn btn-primary">Load</button>
                    <button id='cyjs2loopyStatic' type="submit" class="btn btn-success cyjs2loopy" disabled>cyjs2Loopy</button>
                  </div>

                  <div id="byom" class="tab-pane fade in">
                      <div>
                        <h5>Input</h5>
                        <form>
                            <div class="form-group">
                              <label for="textArea">Describe your mechanism.</label>
                              <textarea class="form-control" id="textArea" rows="15" placeholder="">
Growth-factor proteins activate EGFR, ERBB2 and FGFR.
Growth-factor proteins activate PDGFR.
Growth-factor proteins activate MET, ROS1 and ALK.
EGFR, ERBB2, PDGFR, MET, ROS1, ALK and FGFR activate GRB2 and SHC.
GRB2 and SHC activate RASGRF and SOS.
GRB2 binds SHC.
SOS and RASGRF activate HRAS, NRAS and KRAS.
RASGRP activates HRAS, KRAS and NRAS.
SPRY deactivates HRAS, KRAS and NRAS.
RASA/ARHGAP35 deactivates HRAS, NRAS and KRAS.
RASAL deactivates HRAS, NRAS and KRAS.
NF1/SPRED deactivates HRAS, NRAS and KRAS.
RASA/ARHGAP35 deactivates RHOA, RHOB and RHOC.
RASAL deactivates RHOA, RHOB and RHOC.
NF1/SPRED deactivates RHOA, RHOB and RHOC.
HRAS, NRAS and KRAS activate RALGDS.
RALGDS activates RALA and RALB.
HRAS, NRAS and KRAS activate ARAF, BRAF and RAF1.
ARAF, BRAF and RAF1 activate MAP2K1 and MAP2K2.
MAP2K1 and MAP2K2 activate MAPK1 and MAPK3.
MAPK1 and MAPK3 activate ETS, JUN and FOS.
KSR binds ARAF, BRAF and RAF1.
KSR binds MAP2K1 and MAP2K2.
KSR binds MAPK1 and MAPK3.
ETS, FOS and JUN activate MDM2, CCND1 and DUSP.
MDM2 deactivates TP53.
CCND1 activates CDK4 and CDK6, which deactivate RB1.
DUSP deactivates MAPK1 and MAPK3.
SOS and RASGRF activate RHOA, RHOB and RHOC.
RHOA, RHOB and RHOC activate ROCK1 and ROCK2.
HRAS, NRAS and KRAS activate PIK3C and PIK3R.
PIK3C and PIK3R activate PIP3.
PTEN deactivates PIP3.
PIP3 activates PDPK1, AKT and TIAM.
PDPK1 activates AKT.
AKT deactivates TSC1/TSC2.
TSC1/TSC2 deactivates RHEB.
RHEB activates mTORC2.
STK11 activates PRKAA, PRKAB and PRKAG.
PRKAA, PRKAB and PRKAG deactivate mTORC2.
mTORC2 deactivates EIF4EBP1.
mTORC2 activates RPS6KA.
TIAM activates RAC, which activates PAK.</textarea>
                            </div>

                         </form>
                            <div class= 'btn-div'>
                                <button id='loadButtonDynamic' type="submit" class="btn btn-primary">Load</button>
                                <button id='presetLayoutDynamic' type="submit" class="btn btn-default presetLayout">Preset layout</button>
                                <button id='cyjs2loopyDynamic' type="submit" class="btn btn-success cyjs2loopy" disabled>cyjs2Loopy</button>
                            </div>
                            <div class='btn-div'>
                                <button id='downloadINDRA' type="submit" class="btn btn-default">Download INDRA statments</button>
                                <button id='downloadPySB' type="submit" class="btn btn-default">Download PySB</button>
                                <!-- <button id='INDRA2loopy' type="submit" class="btn btn-primary">INDRA2Loopy</button> -->
                            </div>
                      </div>
                  </div>
                  <div id="context" class="tab-pane fade in">
                      <div >
                        <h5>Dataset</h5>
                        <b>CCLE</b>
                        <h5>ID</h5>
                        <div class="form-group">
                            <div>
                                <label for="cellSelectDynamic">Choose a cell line.</label>
                            </div>
                            <div>
                                <select id='cellSelectDynamic' class="selectpicker"></select>
                            </div>
                        </div>
                            <div>
                               <input  id="scale_slider" type="text"
                                        data-provide="slider"
                                        data-slider-ticks="[3,4,5,6,7,8,9]"

                                        data-slider-min="1"
                                        data-slider-max="9"
                                        data-slider-step="1"
                                        data-slider-value="3"
                                        data-slider-tooltip="hide"
                                        >
                                </input>
                                <div>
                                    <b>WT</b>
                                    <div id="exp_svg"></div>
                                    <b>MUT</b>
                                    <div id="mut_svg"></div>
                                </div>

                            </div>


                      </div>
                  </div>
                  <div id="about" class="tab-pane fade in">
                      <div >
                        <h5>How do I read this map?</h5>
                        <ul>
                            <li>Nodes represent pathway elements.</li>
                            <li>Nodes that are subdivided into pie charts represent families.</li>
                            <li>Wild-type genes are colored <font color="green">green.</font></li>
                            <li>Mutated genes are colored <font color="orange">orange.</font></li>
                            <li>The intensity of each color corresponds to the expression level of a gene in CCLE.</li>
                            <li>Clicking a node provides additional context via CiteAb, HGNC, and UniProt.</li>
                        </ul>
                        <h5>How does this work?</h5>
                        <ul>
                            <li>All models are generated using <a href="https://github.com/sorgerlab/indra">INDRA</a> developed by the <a href="http://hits.harvard.edu/the-program/laboratory-of-systems-pharmacology/about/">Laboratory of Systems Pharmacology</a> at Harvard Medical School.</li>
                            <li>Natural language processing is done using the <a href="https://github.com/clulab/reach">REACH</a> natural language processor developed by the CLU Lab at the University of Arizona.</li>
                            <li>Interactive network visualizations are implemented in <a href="http://js.cytoscape.org">cytoscape.js</a></li>
                            <li><a href="http://ncase.me/loopy/">Loopy</a> is a qualitative modeling tool for creating interactive simulations.</li>
                            <li><a href="http://www.colorbrewer2.org">Colorbrewer2</a> provides all the colorscales used to contextualize nodes.</li>
                        </ul>
                      </div>
                  </div>
                </div>

              </div>
              </div>
            </div>
          </div>
        </div>

      </div>
  </div>

  <div class="row">
    <div class="col-md-12">

      <!-- graph : start -->
      <!-- <h5>Graph</h5> -->
          <div id="cy-container" class="cy-container">
            <div id="cy_1" class="cy" data-url="static/cyjs/model_A101D_SKIN.json"></div>
        </div>
    <!-- graph : end -->
  </div>
  </div>
  </div>
    <!-- container-fluid : end -->
</body>
</html>
